/* Reset básico */
body, h1, h2, h3, h4, p, ul {
  margin: 0;
  padding: 0;
}

body {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
  background-color: #f4f4f4;
  color: #333;
}
</EOF

echo "Arquivos 'src' principais criados."

# --- 4. Arquivos do Jogo (Stores, Views, Components, Router) ---

# src/stores/gameStore.js (O Cérebro)
cat << 'EOF' > src/stores/gameStore.js
import { ref, computed } from 'vue'
import { defineStore } from 'pinia'

// `defineStore` cria o nosso store. 'game' é o ID único.
export const useGameStore = defineStore('game', () => {
  // ----------------
  // STATE (O "inventário" do jogador)
  // ----------------
  const totalBitcoins = ref(0)
  const upgrades = ref([
    {
      id: 1,
      name: 'Mouse Reforçado',
      description: 'Clique vale +1 Bitcoin',
      cost: 10,
      baseCost: 10,
      value: 1,
      owned: 0,
      type: 'click' // Melhora o clique
    },
    {
      id: 2,
      name: 'Estudante de TI',
      description: 'Gera 1 Bitcoin por segundo',
      cost: 100,
      baseCost: 100,
      value: 1,
      owned: 0,
      type: 'auto' // Gera automaticamente
    },
    {
      id: 3,
      name: 'Placa de Vídeo Antiga',
      description: 'Gera 5 Bitcoins por segundo',
      cost: 500,
      baseCost: 500,
      value: 5,
      owned: 0,
      type: 'auto'
    },
    {
      id: 4,
      name: 'Dedo de Programador',
      description: 'Clique vale +10 Bitcoins',
      cost: 1000,
      baseCost: 1000,
      value: 10,
      owned: 0,
      type: 'click'
    },
    {
      id: 5,
      name: 'ASIC Miner',
      description: 'Gera 100 Bitcoins por segundo',
      cost: 10000,
      baseCost: 10000,
      value: 100,
      owned: 0,
      type: 'auto'
    }
  ])

  // ----------------
  // GETTERS (Valores calculados)
  // ----------------

  // Calcula o poder total do clique
  const clickPower = computed(() => {
    // Começa com 1 clique base
    let power = 1
    // Filtra apenas os upgrades do tipo 'click'
    const clickUpgrades = upgrades.value.filter(up => up.type === 'click')
    // Soma o valor de cada upgrade multiplicado pela quantidade possuída
    clickUpgrades.forEach(up => {
      power += up.value * up.owned
    })
    return power
  })

  // Calcula a geração total por segundo
  const btcPerSecond = computed(() => {
    let power = 0
    // Filtra apenas os upgrades do tipo 'auto'
    const autoUpgrades = upgrades.value.filter(up => up.type === 'auto')
    // Soma o valor de cada upgrade multiplicado pela quantidade possuída
    autoUpgrades.forEach(up => {
      power += up.value * up.owned
    })
    return power
  })

  // ----------------
  // ACTIONS (As "funções" do jogo)
  // ----------------

  /**
   * Chamado quando o jogador clica no Bitcoin.
   */
  function clickBitcoin() {
    totalBitcoins.value += clickPower.value
  }

  /**
   * Chamado para comprar um upgrade.
   * @param {number} upgradeId O ID do upgrade a ser comprado
   */
  function buyUpgrade(upgradeId) {
    const upgrade = upgrades.value.find(up => up.id === upgradeId)
    
    if (!upgrade) {
      console.error("Upgrade não encontrado:", upgradeId)
      return
    }

    // Verifica se o jogador tem dinheiro
    if (totalBitcoins.value >= upgrade.cost) {
      // Deduz o custo
      totalBitcoins.value -= upgrade.cost
      // Aumenta a quantidade
      upgrade.owned++
      // Aumenta o custo para a próxima compra (fator de 1.15)
      upgrade.cost = Math.ceil(upgrade.baseCost * Math.pow(1.15, upgrade.owned))
    } else {
      alert("Bitcoins insuficientes!")
    }
  }

  /**
   * O "tick" do jogo, chamado pelo setInterval.
   */
  function gameTick() {
    // Adiciona os bitcoins gerados por segundo
    // (Dividimos por 10 para rodar o loop mais rápido e ter uma animação suave)
    totalBitcoins.value += (btcPerSecond.value / 10)
  }

  // Expõe tudo para os componentes Vue usarem
  return {
    totalBitcoins,
    upgrades,
    clickPower,
    btcPerSecond,
    clickBitcoin,
    buyUpgrade,
    gameTick
  }
})
